{% extends "base.html" %}
{% block title %}Explanations{% endblock %}
{% block content %}

<style>
    
    .sidebar {
        position: fixed;
        top: 76px; 
        left: 0;
        width: 200px; 
        background-color: #c1c5c9; 
        overflow-x: hidden;
        padding-top: 0px;
        color: black;
        border-top-right-radius: 12px; 
        border-bottom-right-radius: 12px; 
    }

    .sidebar .nav-link {
        color: black;
    }

    .content {
        margin-left: 50px; 
        margin-right: 50px; 
        padding: 20px; 
    }

    .jumbotron {
        padding-top: 20px; 
        padding-bottom: 20px; 
        border-radius: 12px; 
    }

    .custom-svg-line {
        width: 100%;
        height: 20px; 
    }

    .code-box {
        background-color: #ffffff;
        padding: 10px; 
        border-radius: 8px; 
        display: inline-block; 
        cursor: pointer; 
        width: 100%; 
        max-width: 100%;
        box-sizing: border-box; 
        position: relative; 
        margin-bottom: 20px; 
    }

    .copy-icon {
        position: absolute;
        left: 830px;
        top: 8px; 
        display: inline-block;
        background-color: #dddddd;
        border-radius: 6px;
        padding: 3px;
        cursor: pointer;
        color: #555555;
        width: 35px;
        height: 30px;
        text-align: center;
    }

    .copy-icon img {
        width: 20px; 
        height: 20px; 
        vertical-align: middle; 
        margin-right: 0px; 
    }
</style>

<div class="sidebar">
    <nav class="nav flex-column">
        <a class="nav-link" href="#Overview">Overview</a>
        <a class="nav-link" href="#Key_Features">Key Features</a>
        <a class="nav-link" href="#Examples">Examples</a>
        <!--<a class="nav-link" href="#Input_Data_Required_Format">Input Data: Required Format</a>-->
     
        <a class="nav-link" href="#Types">Types of Optimisation Experiments</a>
        <a class="nav-link" href="#background">Bayesian Optimisation Basics</a>
        <a class="nav-link" href="#How_To_Run_Locally">How To Run Locally</a>
    </nav>
</div>

<div class="content">
    <div class="container">
        <div class="jumbotron">
            <h1 class="display-4 text-center">Explanations</h1>
            <hr>


            <h2 id="Overview" class="text-left"><u>Overview</u></h2>
            <div class="row">
                <div class="col-md-6">
                </br>
                    <p>Web-BO is a web application offering a graphical user interface (GUI) to facilitate the application of BO to a wide array of chemical problems.</p>
                </br>
                    <p>Users define the optimisation task and perform the measurements, and Web-BO takes care of the rest!</p>
                </div>
                <div class="col-md-6">
                    <img src="{{ url_for('static', filename='fig1_overview_t8.png') }}" class="img-fluid" alt="Description of the image" style="max-width: 100%; height: auto;
                    float: right; margin-top: -55px;">
                </div>
            </div>
            <hr>
            
            
            <h2 id="Key_Features" class="text-left"><u>Key Features</u></h2>
            <p>Web-BO offers several key features:</p>
            <ul>
                <li>It is a <b>modular platform</b> that is easily integrated into existing ELN frameworks</li>
                <li>It can be used as a <b>standalone database and optimiser for chemical tasks.</b> All of the data is stored in a searchable SQL
                    database in an intuitive and future-proof form, enabling efficient benchmarking of varying data-driven optimisation algorithms.</li>
                <li><b>No coding experience is necessary</b> to interface with and apply BO algorithms to chemical optimisation applications.</li>
                <li>You can integrate <b>bespoke BO solvers</b></li>
                <li>There is optimisation space <b>validation</b> to ensure seamless integration</li>
            </ul>
            <hr>


            <h2 id="Examples" class="text-left"><u>Examples</u></h2>
            <p>Web-BO includes two examples and a step-by-step walk-through. One example showcases a sample optimization task, which you can find 
                by clicking the 'Explore' button on the homepage. The second example provides sample input <i>CSV</i> files. Additionally, the walk-through
                 demonstrates how to integrate Web-BO with Datalab.</p>


            </br>
            <p>We also offer an example of the <i>csv</i> format expected by Web-BO. This is comprised of a dataset and a list of categories for the categorical
                variable. See the Tutorial page to learn how to format the <i>csv</i> files correctly.</p>


            <hr>

                <!--
            <h2 id="Input_Data_Required_Format" class="text-left"><u>Input Data: Required Format</u></h2>
            <div class="row">
                <div class="col-md-6">
                    <p>To get the correct file format it is easiest to write your data in an excel spreadsheet, and then save it as a <i>".csv"</i> file.
                        An example input file (for a <b>dataset</b>) is shown on the right. There are three things to note:</p>
                        <ul>
                            <li>The file starts in cell A1, with no empty rows or columns above/next it. This ensures that when your data is tabulated there are no empty cells</li>
                            <li>Row 1 will be your column headers in web-BO, the rows after that your data entries, and each columns is a different variables</li>
                            <li>Row 9 in the image should <b><i>not</i></b> be part of your <i>csv</i> file, it is there to show the type of each variable</li>
                        </ul>
                </div>
                <div class="col-md-6">
                    <img src="{{ url_for('static', filename='test_dataset_v01.png') }}" class="img-fluid" alt="Description of the image" style="max-width: 100%; height: auto; float: right;">
                </div>
            </div>
            <p>When adding an experiment, if a categorical variable needs to be added while defining your parameter space it will ask for a <i>csv</i> file. An
                example input file (for this <b>variable</b>) would be column one of the image on the right (not including row 9).</p>
            <hr>

            
-->
            <h2 id="Types" class="text-left"><u>Types of Optimisation Experiments</u></h2>
            <p>Web-BO can handle optimisation experiments of different fidelity levels and target numbers. See the BO Basics section for more details. </p>
            <li><em>Single-fidelity experiments:</em>
                <ul style="list-style-type: square;">
                    <li>Single-objective</li>
                    <li>Multi-objective</li>
                </ul>
            </li>
            <li><em>Multi-fidelity experiments:</em>
                <ul style="list-style-type: square;">
                    <li>Single-objective</li>
                </ul>
            </li>
            <br>
            <h5>Experimental fidelities</h5>


            <p>Different experimental methods can be leveraged to obtain objective measurements. These methods can be referred to as 'fidelities', describing the accuracy of the obtained data relative to the true quantity.</p>
            <p>Examples of different fidelities can include incorporating experimental data and computational simulations. Typically, high-fidelity data is more expensive to obtain, as the cost frequently correlates with the accuracy. A multi-fidelity optimisation experiment leverages different fidelities to locate the optimal conditions.</p>
            <p><i class="bi bi-exclamation-triangle"></i>  Currently, Web-BO can only support numerical parameters for multi-fidelity Bayesian Optimisation.</p>
            <div class="text-center my-4">
                <figure class="figure" style="max-width: 65%;">
                    <img src="{{ url_for('static', filename='fidelities_fig.png') }}" class="img-fluid" alt="Multi-fidelity Bayesian Optimisation procedure">
                    <figcaption class="figure-caption">Multi-fidelity Bayesian Optimisation procedure.</figcaption>
                </figure>
            </div>


            <h5 class="fw-bold">Experimental Targets</h5>

            <p>Targets in an optimisation experiment refer to the specific objectives or outcomes which you wish to focus on. Common targets include reaction yield and experimental cost, which are typically maximised and minimised, respectively.</p>
            <p><i class="bi bi-exclamation-triangle"></i> Currently, Web-BO can only support single-objective experiments for multi-fidelity Bayesian optimisation.</p>
            <br>


            <hr>


            <h2 id="background" class="text-left"><u>Bayesian Optimisation Basics</u></h2>
            <p>Whilst Web-BO provides a no-code interface for applying Bayesian Optimisation (BO), we believe it’s useful to outline the core principles behind the process. This section provides a beginner-friendly introduction to BO.</p> </br>
            <h5><u>Single-Objective Bayesian Optimisation</u></h5>
            <p>At its simplest, Bayesian Optimisation is used to optimise a single objective, such as maximising reaction yield or minimising waste in a chemical process.</p>
             <p>The key components of BO are:</p>
              <ul> 
                <li><b>Surrogate model:</b> A machine learning model that approximates the relationship between experimental inputs (e.g., temperature, catalyst type) and outputs (e.g., reaction yield).</li> 
                <li><b>Acquisition function:</b> A function that uses the surrogate model's predictions to decide the most promising conditions to try next. It balances: 
                    <ul> 
                        <li><b>Exploitation</b> – choosing inputs that the model predicts will give high performance,</li>
                         <li><b>Exploration</b> – testing lesser explored areas where the model is uncertain.</li>
                     </ul> 
                    </li>
                </ul>


            <div class="text-center my-4">
                <figure class="figure" style="max-width: 65%;">
                    <img src="{{ url_for('static', filename='BO_iteration.png') }}" class="img-fluid" alt="one_iteration" style="max-width: 70%; height: auto;">
                    <figcaption class="figure-caption">A single iteration within a Bayesian optimisation loop.</figcaption>
                </figure>
            </div>
                
            <p>In each optimisation cycle:</p> 
            <ol> 
                <li>The surrogate model predicts performance for different input conditions.</li> 
                <li>The acquisition function selects the next condition(s) to test.</li> 
                <li>An experiment is run with those conditions, and the results are added to the dataset.</li>
                 <li>The model is updated with the new data, and the cycle repeats.</li> 
            </ol> 
     
           
            <p>This process continues until a predefined budget is reached or a satisfactory result is achieved.</p>
               
            <h5><u>Multi-Objective Bayesian Optimisation (MOBO)</u></h5>
            <p>In some problems, we want to optimise more than one outcome - for example, maximising reaction yield while also minimising cost. This is where <b>Multi-Objective BO</b> comes in.</p> 
            <p>MOBO seeks to find a balance (or trade-off) between objectives, producing a set of optimal solutions.</p> 

            <h5><u>Multi-Fidelity Bayesian Optimisation (MFBO)</u></h5>
            <p>Some experiments are expensive or time-consuming to run, while others are cheaper but typically less accurate. <b>Multi-Fidelity BO</b> uses information from different 'fidelities', as discussed within the <i>'Types of Optimisations'</i> section.</p> 
            <p>MFBO balances cost and accuracy by using cheaper data when helpful and only relying on expensive data when necessary.</p>    
            
            <h5><u>Encoding Parameters in Chemistry</u></h5>
            <p>BO algorithms are designed to handle numerical parameters such as temperature and pressure, however, for BO to work well for chemical problems, we must carefully encode any non-numerical experimental categorical parameters, such as catalyst or solvent choice, which are uploaded in <i>csv</i> format. This encoding is handled by Web-BO.</p>
            <p> Additionally, Web-BO accommodates chemical parameters which are uploaded in the forms of SMILES strings, by encoding through one of three methods selected by the user - RDKit chemical descriptors, Mordred or Morgan encoding. These encoding methods translate molecular structures into vector representations.</p>
          

            <h2 id="How_To_Run_Locally" class="text-left"><u>How To Run Locally</u></h2>
            <p> In order to run the web-BO locally, open up your preferred command-line interface and enter the following commands: </p>
            <div class="code-box" id="codeBox" onclick="copyCode()">
                <div>foo@bar:~$ <b>git clone https://github.com/austin-mroz/webBO</b></div>
                <div>foo@bar:~$ <b>cd webBO</b></div>
                <div>foo@bar:~/webBO$ <b>conda env create -p ./.venv -f environment.yml</b></div>
                <div>foo@bar:~/webBO$ <b>conda activate ./.venv</b></div>
                <div>foo@bar:~/webBO$ <b>python main.py</b></div>
                <div class="copy-icon" id="copyIcon">
                    <img id="copyImg" src="{{ url_for('static', filename='clipboard_icon_v01.png') }}" alt="Copy icon">
                </div>
            </div>
        </div>
    </div>
</div>



{% endblock %}